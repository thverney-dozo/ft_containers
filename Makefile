NAME = containers
CFLAGS = -Wall -Werror -Wextra -g3 -fsanitize=address -std=c++98

SRC=${wildcard ./tests/*.cpp}
OBJ = ${SRC:%.cpp=%.o}

all: ${NAME}

./tests/%.o: ./tests/%.cpp
	clang++ ${CFLAGS} -c $< -o $@

$(NAME): ${OBJ}
	clang++ ${CFLAGS} ${OBJ} -o ${NAME}
	@echo 
	@echo "\n\033[03m			Creating my containers\033[00m\033[0;32m"
	@echo "──────────────────────────────────────────────────────────────────────────────"
	
	@echo "███████╗████████╗      ██████╗ ██████╗ ███╗   ██╗████████╗ █████╗ ██╗███╗   ██╗███████╗██████╗ ███████╗"
	@echo "██╔════╝╚══██╔══╝     ██╔════╝██╔═══██╗████╗  ██║╚══██╔══╝██╔══██╗██║████╗  ██║██╔════╝██╔══██╗██╔════╝"
	@echo "█████╗     ██║        ██║     ██║   ██║██╔██╗ ██║   ██║   ███████║██║██╔██╗ ██║█████╗  ██████╔╝███████╗"
	@echo "██╔══╝     ██║        ██║     ██║   ██║██║╚██╗██║   ██║   ██╔══██║██║██║╚██╗██║██╔══╝  ██╔══██╗╚════██║"
	@echo "██║        ██║███████╗╚██████╗╚██████╔╝██║ ╚████║   ██║   ██║  ██║██║██║ ╚████║███████╗██║  ██║███████║"
	@echo "╚═╝        ╚═╝╚══════╝ ╚═════╝ ╚═════╝ ╚═╝  ╚═══╝   ╚═╝   ╚═╝  ╚═╝╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚══════╝\033[00m"
	@echo "                                \033[03mHas been created!\n\033[00m"

clean:
	rm -rf *.dSYM

fclean: clean
	rm -rf ${OBJ}
	rm -rf ${NAME} ${NAME}_test

re: fclean all

.PHONY: all ${NAME} test
